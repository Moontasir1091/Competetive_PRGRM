#include <bits/stdc++.h>
using namespace std;

int main() {
    int test; 
    cin >> test;
    while (test--) {
        int n, k;
        cin >> n >> k;
        vector<long long> v(n);
        map<long long, vector<long long>> mp; // ржПржХрж╛ржзрж┐ржХ ржЗржиржбрзЗржХрзНрж╕ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп `vector` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ

        for (int i = 0; i < n; ++i) {
            cin >> v[i];
            mp[v[i]].push_back(i); // ржорж╛ржирзЗрж░ ржЗржиржбрзЗржХрзНрж╕ рж╕ржВрж░ржХрзНрж╖ржг
        }

        // Debugging output (optional)
        // cout << "Value -> Index Mapping: " << endl;
        // for (auto val : mp) {
        //     cout << val.first << " -> ";
        //     for (auto idx : val.second) {
        //         cout << idx << " ";
        //     }
        //     cout << endl;
        // }

        while (k--) {
            long long a, b;
            cin >> a >> b;

            if (mp.count(a) && mp.count(b)) { // ржпржжрж┐ ржжрзБржЯрж┐ ржорж╛ржи ржорзНржпрж╛ржкрзЗ ржерж╛ржХрзЗ
                if (mp[a].front() < mp[b].back()) { // ржкрзНрж░ржержо `a` ржУ рж╢рзЗрж╖ `b` рждрзБрж▓ржирж╛
                    cout << "YES" << endl;
                } else {
                    cout << "NO" << endl;
                }
            } else {
                cout << "NO" << endl;
            }
        }
    }
   
}


/*ржЖржЧрзЗрж░ ржХрзЛржбрзЗ map<long long, long long> mp; ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрж┐рж▓, ржХрж┐ржирзНрждрзБ ржПрждрзЗ ржкрзНрж░ржержо ржЗржиржбрзЗржХрзНрж╕ ржмрж╛ рж╢рзЗрж╖ ржЗржиржбрзЗржХрзНрж╕ рж░рж╛ржЦрж╛ ржпрж╛ржЪрзНржЫрж┐рж▓ ржирж╛ред

ржПрж░ рж╕ржорж╛ржзрж╛ржи: ЁЯСЙ ржЖржорж░рж╛ vector<long long> ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм, ржпрж╛рждрзЗ ржПржХржЯрж┐ рж╕ржВржЦрзНржпрж╛рж░ рж╕ржм ржЗржиржбрзЗржХрзНрж╕ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
ЁЯСЙ рждрж╛рж╣рж▓рзЗ, mp[a] ржЖрж╕рж▓рзЗ ржПржХржЯрж┐ vector рж╣ржмрзЗ, ржпрзЗржЦрж╛ржирзЗ a рж╕ржВржЦрзНржпрж╛ржЯрж┐ ржпрзЗржЦрж╛ржирзЗ ржпрзЗржЦрж╛ржирзЗ ржкрж╛ржУрзЯрж╛ ржЧрзЗржЫрзЗ рж╕рзЗржЧрзБрж▓рзЛрж░ ржЗржиржбрзЗржХрзНрж╕ ржерж╛ржХржмрзЗред*/

/* mp[a].front() тЖТ a ржкрзНрж░ржержоржмрж╛рж░ ржпрзЗржЦрж╛ржирзЗ ржкрж╛ржУрзЯрж╛ ржЧрзЗржЫрзЗ (рж╕рж░рзНржмржирж┐ржорзНржи index)
ЁЯФ╣ mp[b].back() тЖТ b рж╢рзЗрж╖ржмрж╛рж░ ржпрзЗржЦрж╛ржирзЗ ржкрж╛ржУрзЯрж╛ ржЧрзЗржЫрзЗ (рж╕рж░рзНржмрзЛржЪрзНржЪ index)
ЁЯФ╣ ржЪрзЗржХ ржХрж░ржЫрзЗ:

тЬЕ ржпржжрж┐ a ржкрзНрж░ржержоржмрж╛рж░ b рж╢рзЗрж╖ржмрж╛рж░рзЗрж░ ржЖржЧрзЗржЗ ржЖрж╕рзЗ тЖТ "YES"
тЭМ ржирж╛ рж╣рж▓рзЗ "NO"*/
